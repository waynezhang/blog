<!DOCTYPE html>
<html xmlns="http://www.w3.org/1999/xhtml" xml:lang="en" lang="en-us">
  <head>
    <meta http-equiv="content-type" content="text/html; charset=utf-8" />
    <meta name="author" content="Linghua Zhang" />
    <title>用Privoxy实现Socks代理转HTTP代理</title>
    <link rel="shortcut icon" href="/favicon.ico">
    <link href="/atom.xml" rel="alternate" title="setImpl" type="application/atom+xml" />
    <link rel="stylesheet" href="/media/css/style.css">
    <link rel="stylesheet" href="/media/css/github.css">
    <script type="text/javascript" src="/media/js/highlight.pack.js"></script>
    <script type="text/javascript">
      hljs.initHighlightingOnLoad();
      </script>
    </head>
    <body>
      <div id="container">
        <div id="main" role="main">
          <header>
          <h1>用Privoxy实现Socks代理转HTTP代理</h1>
          </header>
          <nav>
          <span><a title="home page" class="" href="/">home</a></span>
          <span><a title="archives" class="" href="/archives.html">archives</a></span>
          <span><a title="about" class="" href="/about.html">about me</a></span>
          <span><a title="my photos" class="" href="http://www.flickr.com/photos/lhzhang">gallery</a></span>
          <span><a title="blogroll" class="" href="/links.html">links</a></span>
          <span><a title="subscribe me" class="" href="/atom.xml">feed</a></span>
          </nav>
          <article class="content">
          <section class="post">
<p>SSH端口动态转发只能实现Socks代理，但是并不是所有应用都支持Socks代理，比如Last.fm, Windows Live Writer, Opera...所以有个HTTP代理是很有必要的。</p>

<p><a href="http://tinyproxy.banu.com/">tinyproxy</a>是<a href="http://joyus.org/blog/2008/06/socks-proxy-workaround-for-opera.html">不错</a>，可惜只支持POSIX OS。很无奈现在在公司处理普通的工作还是需要Windows。。。所以找到了<a href="http://www.privoxy.org">privoxy</a>，一个cross-platform的web proxy，支持包括广告过滤，cookie管理等很多高级功能，当然也有我们需要的socks转发</p>

<p>设置非常非常简单:</p>

<p>编辑privoxy安装目录下的config.txt，或者启动privoxy，在Options菜单里选择Edit Main Configuration也成。   <br/>
在配置文件里加入listen-address和forward-socks4a的设置，例如</p>

<pre><code># 监听本地的8118端口并转发至8080端口   
listen-address 127.0.0.1:8118   
forward-socks4a / 127.0.0.1:8080
</code></pre>

<p>需要注意的是：</p>

<ul>
<li>出于安全考虑，如果只给本机使用，listen-address的ip要设置成127.0.0.1，如果要给其他人共享，最好同时也设置permit-access（参考配置文件的说明）</li>
<li>forward-socks4也可以做转发，和forward-socks4a的区别在与forward-socks4的dns解析发生在本地而socks4a发生在socks server上</li>
</ul>


<p>题外话：今儿iPhone发售，表参道那边儿已经有<a href="http://it.nikkei.co.jp/mobile/news/index.aspx?n=MMITfa000011072008">1500个哥们儿在排队</a>了。。。我。。。还是去打酱油吧</p>

</section>
<section class="meta">

<span class="tags">
  tagged by 
  
  privoxy&nbsp;
  
  proxy&nbsp;
  
</span>

<span class="time">
  <time datetime="2008-07-11">2008-07-11</time>
</span>

          </article>
        </div>
      </div> <!--! end of #container -->
    </body>
  </html>
